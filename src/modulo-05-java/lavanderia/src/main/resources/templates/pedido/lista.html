<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="@{layout}">
	<head>
		<title>Listar</title>
	</head>
	<body>
		<div th:if="${not #lists.isEmpty(pedidos)}" layout:fragment="content">
		<h3 th:if="${message}" th:text="${message}" class="alert alert-success" role="alert" id="mensagem"></h3>
		<h3 th:if="${mensagem}" th:text="${mensagem}" class="alert" role="alert"></h3>
		
		<a class="btn btn-default" style="float:right;" th:href="${'/pedidos/incluir/'}">Incluir Pedido</a>
		
		<div>
			<form th:action="@{/pedidos/buscarCpf}" th:object="${String}" method="GET" class="form-horizontal">
				<input type="text" name="cpf" placeholder="Cpf" />
				<button type="submit" class="btn btn-default">Buscar</button>
			</form>
		</div>
		
		<div>
			<form th:action="@{/pedidos/buscarSituacao}" th:object="${String}" method="GET" class="form-horizontal">
				<input type="text" name="situacao" placeholder="Situacao" />
				<button type="submit" class="btn btn-default">Buscar</button>
			</form>
		</div>
		
        <table class="table table-hover">        
            <tr>
                <th>Nome</th>
                <th>CPF</th>
                <th>Inclusao</th>
                <th>Valor Total</th>
                <th>Situacao</th>
                <th>Visualizacao</th>
                <th>Cancelamento</th>
            </tr>
            <tr th:each="pedido : ${pedidos}">
                <td th:text="${pedido.cliente.nome}"></td>
                <td th:text="${pedido.cliente.cpf}"></td>
                <td th:text="${pedido.dataInclusao}"></td>
                <td th:text="${pedido.valorFinal}"></td>
                <td th:text="${pedido.situacao}"></td>
                <td><a th:href="${ '/pedidos/visualizar/' + pedido.idPedido}">Visualizar</a></td>
                <td><a th:href="${ '/pedidos/cancelar/' + pedido.idPedido}">Cancelar</a></td>
                <td><a th:href="${ '/pedidos/encerrar/' + pedido.idPedido}">Retirar Pedido</a></td>
                <td><a th:if="*{pedido.situacao.toString() == 'PENDENTE'}" th:href="${ '/pedidos/editar/' + pedido.idPedido}">Editar Pedido</a></td>
            </tr>
        </table>

    	</div>
    	
    	<script layout:fragment="scripts">
    		setTimeout(function () {
    			$('#mensagem').addClass('hide');
    		},3000);
    	</script>
	</body>
</html>